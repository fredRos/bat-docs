<!-- HTML header for doxygen 1.8.8-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <!-- For Mobile Devices -->
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
        <meta name="generator" content="Doxygen 1.8.11"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <title>BAT manual: Installation instructions</title>
        <!--<link href="tabs.css" rel="stylesheet" type="text/css"/>-->
        <script type="text/javascript" src="dynsections.js"></script>
        <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
        <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
MathJax.Hub.Config({
    TeX: {
        Macros: {
            cond: ["{\\,|\\,}"],
            rmdx: ["{\\mbox{d}#1\\,}",1],
            scath: ["{\\theta}"],
            vecth: ["{\\boldsymbol{\\theta}}"],
            order: ["{\\mathcal{O}(#1)}",1],
        }
    }
});
</script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/latest.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
        <link href="doxygen.css" rel="stylesheet" type="text/css" />
        <link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
        <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
        <script type="text/javascript" src="doxy-boot.js"></script>
    </head>
    <body>
        <nav class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand">BAT manual 1.0.0-RC2</a>
                </div>
            </div>
        </nav>
        <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
            <div class="content" id="content">
                <div class="container">
                    <div class="row">
                        <div class="col-sm-12 panel " style="padding-bottom: 15px;">
                            <div style="margin-bottom: 15px;">
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Overview</span></a></li>
      <li class="current"><a href="pages.html"><span>Chapters</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Installation instructions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This document provides a short description of how to compile and use BAT on your computer.</p>
<h2>Platforms </h2>
<p>BAT has been developed on Linux. The installation, unit tests, and examples are run and known to work on Linux and Mac OS X. On Linux, we test with gcc and on Mac OS X we use clang but both compilers should work on either platform.</p>
<p>Windows is not supported.</p>
<h2>Dependencies </h2>
<p>It is understood that all commands shown below are to be entered into a terminal.</p>
<h3>Required: Basic tools</h3>
<p>BAT itself uses only C++03 features. Compilation and tests work fine with gcc &gt;= 4.3 and clang &gt;= 3.3. But recent versions of ROOT (see below) may require a C++11 compliant compiler.</p>
<p>Under Debian or Ubuntu, you can install the essential requirements with </p><pre class="fragment">sudo apt-get install build-essential curl
</pre><p>In order to use the development version of BAT instead of an official release, some more packages are needed </p><pre class="fragment">sudo apt-get install autoconf automake git-core libtool
</pre><p>Building and installing works with autoconf &gt;= 2.63 and automake &gt;= 1.10. To run the tests, a more recent automake version is needed, v1.15 is known to be sufficient.</p>
<h3>Required: ROOT</h3>
<p>ROOT is an object-oriented data-analysis framework. At <a href="http://root.cern.ch/,">http://root.cern.ch/,</a> you can obtain the source code as well as binary distributions for a number of Linux distributions and Mac OS X versions. We advise to download the latest production release of ROOT. BAT is compatible with ROOT &gt;=5.34.19 and ROOT 6. We regularly run unit tests with ROOT 5 and ROOT 6 to ensure backward compatibility.</p>
<p>On Linux, an alternative is to check your package manager for the availability of ROOT packages. Usually these packages are rather old but often they are good enough to build BAT. For example on Ubuntu systems up to 16.04, you can conveniently install the requirements with </p><pre class="fragment">sudo apt-get install libroot-graf2d-postscript-dev libroot-graf3d-g3d-dev\
                     libroot-math-foam-dev libroot-math-minuit-dev\
                     libroot-math-physics-dev libroot-math-mathmore-dev\
                     libroot-roofit-dev root-system-bin
</pre><h4>Note</h4>
<p>For the interface to RooFit/RooStats, ROOT must be compiled with support for RooFit and MathMore, the latter relies on the GNU scientific library (GSL).</p>
<h3>Optional: Cuba</h3>
<p>Cuba is a library containing general-purpose multidimensional integration algorithms. It can be obtained from <a href="http://www.feynarts.de/cuba/">http://www.feynarts.de/cuba/</a>. BAT is compatible with Cuba versions 3.3 through at least 4.2.</p>
<p>Cuba is not necessary to run BAT. We recommend it for model comparison where expensive integrals are needed. Cuba provides integration routines tuned for performance, which are useful for integration in problems with not too many dimensions (~10). By default, Cuba will evaluate in parallel and take all idle cores; the number of cores can be set through an environment variable. For a single core, set </p><pre class="fragment">CUBACORES=1
</pre><p>The recommended way to get Cuba is to configure BAT with the option </p><pre class="fragment">--with-cuba=download
</pre><p>This will download a compatible version of Cuba to the local subdirectory <code>external/cuba-VERSION</code>, compile it, and configure BAT to use it.</p>
<p>If you want to compile Cuba manually, make sure it is built with position-independent code: </p><pre class="fragment">./configure CFLAGS='-fPIC -O3 -fomit-frame-pointer -ffast-math -Wall'
make
make install
</pre><h2>Building </h2>
<h3>Obtaining BAT</h3>
<p>You can download the latest release of BAT from <a href="http://mpp.mpg.de/bat/">http://mpp.mpg.de/bat/</a>. Open a terminal, unpack the tarball usually named like BAT-x.x.tar.gz (here x.x is the version number) and switch to the directory </p><pre class="fragment">tar -xzf BAT-x.x.tar.gz
cd BAT-x.x
</pre><p>Alternatively, you can clone the git repository <a href="https://github.com/bat/bat">https://github.com/bat/bat</a> (we recommend using the master branch): </p><pre class="fragment">git clone https://github.com/bat/bat
cd bat
./autogen.sh
</pre><p>Now start the configuration with </p><pre class="fragment">./configure
</pre><p>This will check your system for all components needed to compile BAT and set up the paths for installation. You can add the option <code>--prefix=/path/to/install/bat</code> to <code>./configure</code>. The BAT library files will then be installed to <code>$prefix/lib</code> and the include files to <code>$prefix/include</code>. The default installation prefix is <code>/usr/local</code>, which requires super-user privileges.</p>
<p>You can list all available options using </p><pre class="fragment">./configure --help
</pre><p>In the following, we describe the most useful options in detail.</p>
<h3>ROOT</h3>
<p>The configure script checks for ROOT availability in the system and fails if ROOT is not installed. You can specify the <code>ROOTSYS</code> directory using <code>--with-rootsys=/path/to/rootsys</code></p>
<p>BAT support for RooFit/RooStats is turned off by default. The feature can be turned on explicitly with <code>--enable-roostats</code>. The configure script will check whether the version of ROOT is sufficient and whether ROOT was compiled with RooFit/RooStats support.</p>
<h3>openMP</h3>
<p>Support for openMP threading to run multiple Markov chains in parallel is available through the configure option <code>--enable-parallel</code>; it is disabled by default. This requires a version of gcc accepting the <code>-fopenmp</code> flag, anything &gt;= 4.2 should suffice. Note that if threads are enabled, the default number of threads actually used is implementation dependent and may also depend on the current load of the CPU. Manual control over the number of threads is achieved entirely by openMP means such as setting the environment variable <code>OMP_NUM_THREADS</code> before running an executable.</p>
<p>The default version of clang does not implement openMP.</p>
<h3>Cuba</h3>
<p>If you configured BAT with the option <code>--with-cuba=download</code>, BAT will download, compile, and use Cuba automatically. For manual configuration, use the configure option <code>--with-cuba[=DIR]</code> to enable Cuba. If you installed Cuba including the <code>partview</code> executable, the Cuba installation path will be derived from its location. Otherwise, the configure script will search for <code>libcuba.a</code> and <code>cuba.h</code> in the system paths. If you manually specify the Cuba install path as <code>DIR</code>, configure will look in <code>DIR/lib/</code> and <code>DIR/include/</code> instead. For more fine-grained control, use <code>--with-cuba-include-dir=/path/to/cuba/header</code> and <code>--with-cuba-lib-dir=/path/to/cuba/lib</code>.</p>
<h3>Advanced options</h3>
<p>If you want to be able to step through BAT line by line with a debugger, use <code>--enable-debug</code>. This slows down execution as it turns off code optimization but it improves the compilation time. Another way to speed up the build is to create only shared libraries if you don't need static libraries: <code>--disable-static</code>. Finally, you can reduce the output to the terminal with <code>--enable-silent-rules</code>.</p>
<h3>Compile</h3>
<p>After a successful configuration, run </p><pre class="fragment">make
make install
</pre><p>to compile and install BAT. Note that depending on the setting of the installation prefix you might need super-user privileges to be able to install BAT and run <code>sudo make install</code> instead of plain <code>make install</code>. In the former case, you might need to run <code>sudo ldconfig</code> just once to help the loader pick up the new libraries immediately.</p>
<h2>System setup </h2>
<p>After installation, BAT offers two mechanisms to make BAT available:</p>
<ol type="1">
<li>The script <code>bat-config</code> returns details of the BAT installation directories and compilation settings; see <code>bat-config</code>.</li>
<li>The file <code>bat.pc</code> contains the same information as above and can be used by the more powerful <code>pkg-config</code>; e.g., <pre class="fragment"> pkg-config --modversion bat
 pkg-config --libs bat
</pre></li>
</ol>
<p>If you do not install BAT to the system directories, you need to manually add the path to <code>bat-config</code>, <code>bat.pc</code>, the libraries, and the include files to the search paths. Depending on your shell, the set of commands on linux for bash-compatible shells is </p><pre class="fragment">BATPREFIX="/bat/install/prefix"
export PATH="$BATPREFIX/bin:$PATH"
export LD_LIBRARY_PATH="$BATPREFIX/lib:$LD_LIBRARY_PATH"
export CPATH="$BATPREFIX/include:$CPATH"
export PKG_CONFIG_PATH="$BATPREFIX/lib/pkgconfig:$PKG_CONFIG_PATH"
</pre><p>and for csh-compatible shells is </p><pre class="fragment">set BATPREFIX = /bat/install/prefix
setenv PATH              "${BATPREFIX}/bin:${PATH}"
setenv LD_LIBRARY_PATH   "${BATPREFIX}/lib:${LD_LIBRARY_PATH}"
setenv CPATH             "${BATPREFIX}/include:${CPATH}"
setenv PKG_CONFIG_PATH   "${BATPREFIX}/lib/pkgconfig:${PKG_CONFIG_PATH}"
</pre><p>If you want to make BAT permanently available, add the above commands to your login script, for example to <code>.profile</code> or to <code>.bashrc</code>.</p>
<p>On Mac OS X you do not have to set up <code>LD_LIBRARY_PATH</code> because we use the <code>rpath</code> option to make BAT compatible with the SIP feature enabled by default on Mac OS X starting with El Capitan.</p>
<p>Updating <code>$CPATH</code> is required if you work with interactive ROOT macros that use BAT (both for ROOT 5 and 6).</p>
<p>The minimal setup does not require setting <code>PKG_CONFIG_PATH</code> to run BAT unless you want to integrate BAT into another probject using <code>pkg-config</code>. BAT itself does not use <code>pkg-config</code>.</p>
<h2>Including BAT in your project </h2>
<p>The most basic way to compile and link a file <code>example.cxx</code> with BAT is </p><pre class="fragment">gcc `bat-config --cflags` `bat-config --libs` example.cxx -o
</pre><p>In a makefile, simply query <code>bat-config</code> to set appropriate variables. However, there will be an error at runtime, for example in interactive ROOT macros, if </p><pre class="fragment">libBAT.so, libBATmodels.so, libBATmtf.so,
libBAT.rootmap, libBATmodels.rootmap, libBATmtf.rootmap
</pre><p>are not in the directories searched by the library loader; see above how to setup the <code>LD_LIBRARY_PATH</code> and the <code>CPATH</code>.</p>
<h2>Interactive ROOT macros </h2>
<p>Due to problems in ROOT 6.02.00, it is important to create an instance of a BAT class before calling any free function defined in the BAT libraries. Else <code>cling</code> will emit confusing <a href="https://github.com/bat/bat/issues/5">error messages</a>. For example, the right order would be </p><pre class="fragment">int main() {
    BCLog::OpenLog("log.txt");
    BCAux::SetStyle();
    ...
}
</pre><p>instead of the other way around around because <code>OpenLog</code> creates a singleton object.</p>
<h2>Contact </h2>
<p>Please consult the BAT web page <a href="http://mpp.mpg.de/bat/">http://mpp.mpg.de/bat/</a> for further information. In case of questions or problems, please don't hesitate to create an issue at <a href="https://github.com/bat/bat/issues/">https://github.com/bat/bat/issues/</a> or contact the authors directly via email through <a href="#" onclick="location.href='mai'+'lto:'+'bat'+'@m'+'pp.'+'mp'+'g.d'+'e'; return false;">bat@m<span style="display: none;">.nosp@m.</span>pp.m<span style="display: none;">.nosp@m.</span>pg.de</a>. </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.8-->
<!-- start footer part -->
</div>
</div>
</div>
</div>
</div>
<!-- <hr class="footer"/><address class="footer"><small> -->
<!-- Generated on Tue May 8 2018 13:18:41 for BAT manual by &#160;<a href="http://www.doxygen.org/index.html"> -->
<!-- <img class="footer" src="doxygen.png" alt="doxygen"/> -->
<!-- </a> 1.8.11 -->
<!-- </small></address> -->
</body>
</html>
